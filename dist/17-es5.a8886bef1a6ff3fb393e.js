!function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{uCiB:function(e,n,o){"use strict";o.r(n),o.d(n,"SupportModule",function(){return L});var c=o("SVse"),a=o("7g+E"),r=o("iInd"),s=o("H+bZ"),l=o("2Rin"),d=o("8Y7J"),g=o("WzhS"),u=o("s7LF"),f=["scrollMe"],p=["messages"];function m(t,i){if(1&t&&(d.bc(0,"div",16),d.bc(1,"div",17),d.Wb(2,"img",18),d.bc(3,"label",19),d.Hc(4),d.Wb(5,"br"),d.bc(6,"span",20),d.Hc(7),d.ac(),d.ac(),d.ac(),d.ac()),2&t){var e=d.lc();d.Jb(2),d.rc("src",e.api.mediaURL+e.avtar,d.Dc),d.Jb(2),d.Jc("",e.name," "),d.Jb(3),d.Ic(e.type)}}function h(t,i){if(1&t){var e=d.cc();d.bc(0,"div",21),d.ic("click",function(){return d.Bc(e),d.lc().admin()}),d.bc(1,"div",22),d.Wb(2,"img",23),d.bc(3,"label",19),d.Hc(4),d.Wb(5,"br"),d.Wb(6,"span",24),d.ac(),d.ac(),d.ac()}if(2&t){var n=d.lc();d.rc("id",n.util.adminInfo.id),d.Jb(4),d.Kc(" ",n.util.adminInfo.first_name+" "+n.util.adminInfo.last_name," - (",n.util.translate("Administrator"),") ")}}function v(t,i){if(1&t){var e=d.cc();d.bc(0,"div",27),d.ic("click",function(){d.Bc(e);var t=d.lc().$implicit;return d.lc().chatUser(t.participants,t.receiver_type,t.receiver_name+" "+t.receiver_last_name)}),d.Wb(1,"img",18),d.bc(2,"label",19),d.Hc(3),d.ac(),d.ac()}if(2&t){var n=d.lc().$implicit,o=d.lc();d.Jb(1),d.rc("src",o.api.mediaURL+n.receiver_cover,d.Dc),d.Jb(2),d.Jc("",n.receiver_name+" "+n.receiver_last_name," ")}}function b(t,i){if(1&t){var e=d.cc();d.bc(0,"div",27),d.ic("click",function(){d.Bc(e);var t=d.lc().$implicit;return d.lc().chatUser(t.uid,t.sender_type,t.sender_first_name+" "+t.sender_last_name)}),d.Wb(1,"img",18),d.bc(2,"label",19),d.Hc(3),d.ac(),d.ac()}if(2&t){var n=d.lc().$implicit,o=d.lc();d.Jb(1),d.rc("src",o.api.mediaURL+n.sender_cover,d.Dc),d.Jb(2),d.Jc("",n.sender_first_name+" "+n.sender_last_name," ")}}function _(t,i){if(1&t&&(d.bc(0,"div",25),d.Gc(1,v,4,2,"div",26),d.Gc(2,b,4,2,"div",26),d.ac()),2&t){var e=i.$implicit,n=d.lc();d.rc("id",n.uid==e.uid?e.participants:e.uid),d.Jb(1),d.rc("ngIf",n.uid==e.uid),d.Jb(1),d.rc("ngIf",n.uid!=e.uid)}}function y(t,i){1&t&&(d.bc(0,"div",28),d.bc(1,"div",22),d.Wb(2,"ngx-skeleton-loader",29),d.ac(),d.ac())}function x(t,i){if(1&t&&(d.bc(0,"div",33),d.bc(1,"div",34),d.bc(2,"div",35),d.Hc(3),d.ac(),d.ac(),d.Wb(4,"div",36),d.ac()),2&t){var e=d.lc().$implicit;d.Jb(3),d.Jc(" ",e.message," ")}}function w(t,i){if(1&t&&(d.bc(0,"div",37),d.bc(1,"div",34),d.bc(2,"div",35),d.Hc(3),d.ac(),d.ac(),d.Wb(4,"div",38),d.ac()),2&t){var e=d.lc().$implicit;d.Jb(3),d.Jc(" ",e.message," ")}}function C(t,i){if(1&t&&(d.bc(0,"span",null,30),d.Gc(2,x,5,1,"div",31),d.Gc(3,w,5,1,"div",32),d.ac()),2&t){var e=i.$implicit,n=d.lc();d.Jb(2),d.rc("ngIf",e.from_id==n.uid),d.Jb(1),d.rc("ngIf",e.from_id!=n.uid)}}function M(t,i){if(1&t){var e=d.cc();d.bc(0,"div",39),d.bc(1,"input",40),d.ic("ngModelChange",function(t){return d.Bc(e),d.lc().message=t})("keydown.enter",function(){return d.Bc(e),d.lc().send()}),d.ac(),d.bc(2,"button",41),d.ic("click",function(){return d.Bc(e),d.lc().send()}),d.Wb(3,"i",42),d.ac(),d.ac()}if(2&t){var n=d.lc();d.Jb(1),d.rc("ngModel",n.message)("placeholder",n.util.translate("Send Message"))}}var I,O,k,J=[{path:"",component:(I=function(){function e(i,n){t(this,e),this.util=i,this.api=n,this.users=[],this.dummy=[],this.dummyList=Array(5),this.messages=[],this.roomId="",this.uid=parseInt(localStorage.getItem("uid")),this.getList()}var n,o,c;return n=e,(o=[{key:"canDeactivate",value:function(){console.log("ok")}},{key:"getList",value:function(){this.users=[],this.dummy=[],this.getChatList()}},{key:"getChatList",value:function(){var t=this;this.dummyList=Array(5),this.api.post_private("v1/chats/getChatListBUid",{id:this.uid}).then(function(i){console.log(i),t.dummyList=[],i&&i.status&&i.data&&i.data.length&&(t.users=i.data)},function(i){console.log(i),t.dummyList=[],t.util.apiErrorHandler(i)}).catch(function(i){console.log(i),t.dummyList=[],t.util.apiErrorHandler(i)})}},{key:"ngOnInit",value:function(){}},{key:"search",value:function(t){console.log(t)}},{key:"getChatRooms",value:function(){var t=this;this.api.post_private("v1/chats/getChatRooms",{uid:this.uid,participants:this.id}).then(function(i){console.log(i),i&&i.status&&200===i.status?(i&&i.data&&i.data.id?t.roomId=i.data.id:i&&i.data2&&i.data2.id&&(t.roomId=i.data2.id),t.getMessageList(),t.interval=setInterval(function(){console.log("calling in interval"),t.getMessageList()},12e3)):t.createChatRooms()},function(i){console.log("error",i),t.createChatRooms()}).catch(function(i){t.createChatRooms(),console.log("error",i)})}},{key:"createChatRooms",value:function(){var t=this;this.api.post_private("v1/chats/createChatRooms",{uid:this.uid,participants:this.id,status:1}).then(function(i){console.log(i),i&&i.status&&200===i.status&&i.data&&(t.roomId=i.data.id,t.getMessageList(),t.interval=setInterval(function(){console.log("calling in interval"),t.getMessageList()},12e3))},function(t){console.log("error",t)}).catch(function(t){console.log("error",t)})}},{key:"admin",value:function(){this.id=this.util.adminInfo.id,this.name=this.util.adminInfo.first_name+" "+this.util.adminInfo.last_name,this.getChatRooms()}},{key:"chatUser",value:function(t,i,e){console.log(t,i,e),this.id=t,this.name=e,this.getChatRooms()}},{key:"getMessageList",value:function(){var t=this;this.api.post_private("v1/chats/getById",{room_id:this.roomId}).then(function(i){console.log(i),i&&i.status&&200===i.status&&i.data.length&&(t.messages=i.data)},function(t){console.log(t)}).catch(function(t){console.log(t)})}},{key:"send",value:function(){var t=this;if(console.log(this.message),!this.message||""===this.message)return!1;var i=this.message;this.message="",this.api.post_private("v1/chats/sendMessage",{room_id:this.roomId,uid:this.uid,from_id:this.uid,message:i,message_type:0,status:1}).then(function(i){console.log(i),i&&200===i.status&&t.getMessageList()},function(t){console.log(t)})}}])&&i(n.prototype,o),c&&i(n,c),e}(),I.\u0275fac=function(t){return new(t||I)(d.Vb(l.a),d.Vb(s.a))},I.\u0275cmp=d.Pb({type:I,selectors:[["app-support"]],viewQuery:function(t,i){var e;1&t&&(d.Lc(f,1),d.Lc(p,1)),2&t&&(d.yc(e=d.jc())&&(i.myScrollContainer=e.first),d.yc(e=d.jc())&&(i.messagesList=e))},hostBindings:function(t,i){1&t&&d.ic("beforeunload",function(){return i.canDeactivate()},!1,d.Ac)},decls:18,vars:8,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"card-body","reset-table","p-t-0"],[1,"form-group","row",2,"height","60vh","border","1px solid lightgray"],[1,"col-sm-4",2,"height","60vh","overflow","scroll","padding","0px","border-right","1px solid lightgray"],["style","border-bottom: 1px solid lightgray;padding: 10px;margin: 10px;background: lightcoral;color: white;",4,"ngIf"],["style","border-bottom: 1px solid lightgray;padding: 10px;margin: 10px;",3,"id","click",4,"ngIf"],["style","border-bottom: 1px solid lightgray;padding: 10px;margin: 10px;",3,"id",4,"ngFor","ngForOf"],["style","border-bottom: 1px solid lightgray;padding: 10px;margin: 10px;",4,"ngFor","ngForOf"],[1,"col-sm-8",2,"height","60vh","overflow","scroll","position","relative"],[1,"lower_div",3,"scrollTop"],["scrollMe",""],[4,"ngFor","ngForOf"],["style","position: absolute;bottom: 10px;width: 90%;display: flex;flex-direction: row;justify-content: space-between;align-items: center;",4,"ngIf"],[2,"border-bottom","1px solid lightgray","padding","10px","margin","10px","background","lightcoral","color","white"],[2,"display","flex"],["onError","this.src='assets/imgs/user.png'","alt","chat-user",1,"img-responsive",2,"height","40px","width","40px","border-radius","50%",3,"src"],[2,"margin-left","10px"],[2,"font-size",".6rem","color","white"],[2,"border-bottom","1px solid lightgray","padding","10px","margin","10px",3,"id","click"],[2,"display","flex","align-items","center"],["src","assets/imgs/user.png","onError","this.src='assets/imgs/user.png'","alt","chat-user",1,"img-responsive",2,"height","40px","width","40px","border-radius","50%"],[2,"font-size",".6rem","color","gray"],[2,"border-bottom","1px solid lightgray","padding","10px","margin","10px",3,"id"],["style","display:flex;align-items: center;",3,"click",4,"ngIf"],[2,"display","flex","align-items","center",3,"click"],[2,"border-bottom","1px solid lightgray","padding","10px","margin","10px"],["count","1","appearance","line",2,"width","100%"],["messages",""],["class","main_div_right",4,"ngIf"],["class","main_div_left",4,"ngIf"],[1,"main_div_right"],[1,"msg_div"],[1,"inner_msg"],[1,"tri_right"],[1,"main_div_left"],[1,"tri_left"],[2,"position","absolute","bottom","10px","width","90%","display","flex","flex-direction","row","justify-content","space-between","align-items","center"],["type","text",1,"form-control","form-control-round",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"btn","btn-danger","btn-icon",2,"margin-left","10px",3,"click"],[1,"cil-send"]],template:function(t,i){if(1&t&&(d.bc(0,"div",0),d.bc(1,"div",1),d.bc(2,"div",2),d.bc(3,"div",3),d.bc(4,"h5"),d.Hc(5),d.ac(),d.ac(),d.bc(6,"div",4),d.bc(7,"div",5),d.bc(8,"div",6),d.Gc(9,m,8,3,"div",7),d.Gc(10,h,7,3,"div",8),d.Gc(11,_,3,3,"div",9),d.Gc(12,y,3,0,"div",10),d.ac(),d.bc(13,"div",11),d.bc(14,"div",12,13),d.Gc(16,C,4,2,"span",14),d.ac(),d.Gc(17,M,4,2,"div",15),d.ac(),d.ac(),d.ac(),d.ac(),d.ac(),d.ac()),2&t){var e=d.zc(15);d.Jb(5),d.Jc("",i.util.translate("Support")," "),d.Jb(4),d.rc("ngIf",i.selectedId),d.Jb(1),d.rc("ngIf",i.util&&i.util.adminInfo&&i.util.adminInfo.id),d.Jb(1),d.rc("ngForOf",i.users),d.Jb(1),d.rc("ngForOf",i.dummyList),d.Jb(2),d.rc("scrollTop",e.scrollHeight),d.Jb(2),d.rc("ngForOf",i.messages),d.Jb(1),d.rc("ngIf",i.id)}},directives:[c.l,c.k,g.a,u.a,u.g,u.j],styles:[".lower_div[_ngcontent-%COMP%]{padding:20px;height:50vh;overflow:scroll}.lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;position:relative}.lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:80%;margin-bottom:15px}.lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]   .inner_msg[_ngcontent-%COMP%]{background-color:#f0eff5;padding:10px;border-radius:5px}.lower_div[_ngcontent-%COMP%]   .main_div_right[_ngcontent-%COMP%]   .tri_right[_ngcontent-%COMP%]{width:0;height:0;position:absolute;border-top:10px solid #f0eff5;border-left:10px solid transparent;bottom:10px}.lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;position:relative}.lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:80%;margin-bottom:15px}.lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]   .inner_msg[_ngcontent-%COMP%]{background-color:gray;padding:10px;border-radius:5px;color:#fff}.lower_div[_ngcontent-%COMP%]   .main_div_left[_ngcontent-%COMP%]   .tri_left[_ngcontent-%COMP%]{width:0;height:0;position:absolute;border-top:10px solid gray;border-right:10px solid transparent;bottom:10px}"]}),I)}],P=((k=function i(){t(this,i)}).\u0275fac=function(t){return new(t||k)},k.\u0275mod=d.Tb({type:k}),k.\u0275inj=d.Sb({imports:[[r.g.forChild(J)],r.g]}),k),L=((O=function i(){t(this,i)}).\u0275fac=function(t){return new(t||O)},O.\u0275mod=d.Tb({type:O}),O.\u0275inj=d.Sb({imports:[[c.c,P,a.b,g.b,u.e]]}),O)}}])}();