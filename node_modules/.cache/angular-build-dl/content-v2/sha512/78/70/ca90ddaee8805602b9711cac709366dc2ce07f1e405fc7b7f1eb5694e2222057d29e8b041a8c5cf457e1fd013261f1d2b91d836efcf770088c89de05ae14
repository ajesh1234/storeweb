!function(){function t(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var c=0,r=function(){};return{s:r,n:function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw a}}}}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"iU+t":function(n,i,r){"use strict";r.r(i),r.d(i,"StatsModule",function(){return q});var a,o,l=r("SVse"),s=r("iInd"),u=r("mrSG"),d=r("wd/R"),f=r("H+bZ"),b=r("2Rin"),p=r("8Y7J"),m=r("7g+E"),g=r("s7LF"),h=((o=function(){function n(){e(this,n),this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}return c(n,[{key:"printStyle",set:function(t){for(var n in t)t.hasOwnProperty(n)&&this._printStyle.push((n+JSON.stringify(t[n])).replace(/['"]+/g,""));this.returnStyleValues()}},{key:"returnStyleValues",value:function(){return"<style> ".concat(this._printStyle.join(" ").replace(/,/g,";")," </style>")}},{key:"styleSheetFile",set:function(n){var e=function(t){return'<link rel="stylesheet" type="text/css" href="'.concat(t,'">')};if(-1!==n.indexOf(",")){var i,c=t(n.split(","));try{for(c.s();!(i=c.n()).done;){var r=i.value;this._styleSheetFile=this._styleSheetFile+e(r)}}catch(a){c.e(a)}finally{c.f()}}else this._styleSheetFile=e(n)}},{key:"returnStyleSheetLinkTags",value:function(){return this._styleSheetFile}},{key:"getElementTag",value:function(t){for(var n=[],e=document.getElementsByTagName(t),i=0;i<e.length;i++)n.push(e[i].outerHTML);return n.join("\r\n")}},{key:"getFormData",value:function(t){for(var n=0;n<t.length;n++)t[n].defaultValue=t[n].value,t[n].checked&&(t[n].defaultChecked=!0)}},{key:"getHtmlContents",value:function(){var t=document.getElementById(this.printSectionId),n=t.getElementsByTagName("input");this.getFormData(n);var e=t.getElementsByTagName("textarea");return this.getFormData(e),t.innerHTML}},{key:"print",value:function(){var t,n,e="",i="",c=this.getElementTag("base");this.useExistingCss&&(e=this.getElementTag("style"),i=this.getElementTag("link")),t=this.getHtmlContents(),(n=window.open("","_blank","top=0,left=0,height=auto,width=auto")).document.open(),n.document.write("\n      <html>\n        <head>\n          <title>".concat(this.printTitle?this.printTitle:"","</title>\n          ").concat(c,"\n          ").concat(this.returnStyleValues(),"\n          ").concat(this.returnStyleSheetLinkTags(),"\n          ").concat(e,"\n          ").concat(i,"\n        </head>\n        <body>\n          ").concat(t,"\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                closeWindow(window.print());\n              }, ").concat(this.printDelay,");\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>")),n.document.close()}}]),n}()).\u0275fac=function(t){return new(t||o)},o.\u0275dir=p.Qb({type:o,selectors:[["button","ngxPrint",""]],hostBindings:function(t,n){1&t&&p.ic("click",function(){return n.print()})},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),o),v=((a=function t(){e(this,t)}).\u0275fac=function(t){return new(t||a)},a.\u0275mod=p.Tb({type:a}),a.\u0275inj=p.Sb({imports:[[]]}),a);function y(t,n){if(1&t&&(p.bc(0,"button",15),p.Wb(1,"i",16),p.Hc(2),p.ac()),2&t){var e=p.lc();p.rc("useExistingCss",!0)("printTitle",e.storename),p.Jb(2),p.Jc("",e.util.translate("Print")," ")}}function J(t,n){if(1&t&&(p.bc(0,"h2",17),p.Hc(1),p.ac()),2&t){var e=p.lc();p.Jb(1),p.Jc(" ",e.util.translate("No Orders Found")," ")}}function H(t,n){1&t&&(p.bc(0,"span"),p.Hc(1,","),p.ac())}function S(t,n){if(1&t&&(p.bc(0,"p"),p.Hc(1),p.Gc(2,H,2,0,"span",33),p.ac()),2&t){var e=n.$implicit,i=n.index,c=p.lc().$implicit;p.Jb(1),p.Jc(" ",e.name," "),p.Jb(1),p.rc("ngIf",c.orders.length-1!==i)}}function w(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",i.util.currecny," ",e.total," ")}}function I(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",e.total," ",i.util.currecny,"")}}function x(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",i.util.currecny," ",e.discount," ")}}function F(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",e.discount," ",i.util.currecny,"")}}function k(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",i.util.currecny," ",e.grand_total," ")}}function O(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",e.grand_total," ",i.util.currecny,"")}}function D(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",i.util.currecny," ",i.getCommisions(e.total)," ")}}function T(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc().$implicit,i=p.lc(2);p.Jb(1),p.Kc("",i.getCommisions(e.total)," ",i.util.currecny,"")}}function C(t,n){if(1&t&&(p.bc(0,"tr",34),p.bc(1,"td"),p.Hc(2),p.ac(),p.bc(3,"td"),p.Hc(4),p.ac(),p.bc(5,"td"),p.Gc(6,S,3,2,"p",35),p.ac(),p.bc(7,"td"),p.Gc(8,w,2,2,"span",33),p.Gc(9,I,2,2,"span",33),p.ac(),p.bc(10,"td"),p.Gc(11,x,2,2,"span",33),p.Gc(12,F,2,2,"span",33),p.ac(),p.bc(13,"td"),p.Gc(14,k,2,2,"span",33),p.Gc(15,O,2,2,"span",33),p.ac(),p.bc(16,"td"),p.Gc(17,D,2,2,"span",33),p.Gc(18,T,2,2,"span",33),p.ac(),p.ac()),2&t){var e=n.$implicit,i=p.lc(2);p.Jb(2),p.Jc("#",e.id,""),p.Jb(2),p.Ic(e.date_time),p.Jb(2),p.rc("ngForOf",e.orders),p.Jb(2),p.rc("ngIf","left"===i.util.cside),p.Jb(1),p.rc("ngIf","right"===i.util.cside),p.Jb(2),p.rc("ngIf","left"===i.util.cside),p.Jb(1),p.rc("ngIf","right"===i.util.cside),p.Jb(2),p.rc("ngIf","left"===i.util.cside),p.Jb(1),p.rc("ngIf","right"===i.util.cside),p.Jb(2),p.rc("ngIf","left"===i.util.cside),p.Jb(1),p.rc("ngIf","right"===i.util.cside)}}function Y(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc(2);p.Jb(1),p.Kc("",e.util.currecny," ",e.totalAmount," ")}}function M(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc(2);p.Jb(1),p.Kc("",e.totalAmount," ",e.util.currecny,"")}}function A(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc(2);p.Jb(1),p.Kc("",e.util.currecny," ",e.commisionAmount," ")}}function E(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc(2);p.Jb(1),p.Kc("",e.commisionAmount," ",e.util.currecny,"")}}function G(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc(2);p.Jb(1),p.Kc("",e.util.currecny," ",e.toPay,"")}}function _(t,n){if(1&t&&(p.bc(0,"span"),p.Hc(1),p.ac()),2&t){var e=p.lc(2);p.Jb(1),p.Kc("",e.toPay," ",e.util.currecny,"")}}function K(t,n){if(1&t&&(p.bc(0,"div",18),p.bc(1,"div",2),p.bc(2,"div",3),p.bc(3,"div",19),p.bc(4,"h3",20),p.Hc(5),p.ac(),p.bc(6,"p",21),p.Hc(7),p.ac(),p.bc(8,"p",22),p.Hc(9),p.ac(),p.bc(10,"p",23),p.Hc(11),p.Wb(12,"br"),p.Hc(13),p.Wb(14,"br"),p.Hc(15),p.ac(),p.bc(16,"p",23),p.Hc(17),p.ac(),p.bc(18,"p",23),p.Hc(19),p.ac(),p.bc(20,"p",24),p.Hc(21),p.ac(),p.bc(22,"p",25),p.Hc(23),p.ac(),p.bc(24,"table",26),p.bc(25,"thead"),p.bc(26,"tr",27),p.bc(27,"th"),p.Hc(28),p.ac(),p.bc(29,"th"),p.Hc(30),p.ac(),p.bc(31,"th"),p.Hc(32),p.ac(),p.bc(33,"th"),p.Hc(34),p.ac(),p.bc(35,"th"),p.Hc(36),p.ac(),p.bc(37,"th"),p.Hc(38),p.ac(),p.bc(39,"th"),p.Hc(40),p.ac(),p.ac(),p.ac(),p.bc(41,"tbody"),p.Gc(42,C,19,11,"tr",28),p.ac(),p.ac(),p.bc(43,"div",29),p.Wb(44,"div",8),p.bc(45,"div",30),p.bc(46,"p",22),p.Hc(47),p.ac(),p.bc(48,"p",22),p.Hc(49),p.ac(),p.bc(50,"p",22),p.Hc(51),p.ac(),p.ac(),p.bc(52,"div",31),p.bc(53,"p",32),p.Gc(54,Y,2,2,"span",33),p.Gc(55,M,2,2,"span",33),p.ac(),p.bc(56,"p",32),p.Gc(57,A,2,2,"span",33),p.Gc(58,E,2,2,"span",33),p.ac(),p.bc(59,"p",32),p.Gc(60,G,2,2,"span",33),p.Gc(61,_,2,2,"span",33),p.ac(),p.ac(),p.ac(),p.ac(),p.ac(),p.ac(),p.ac()),2&t){var e=p.lc();p.Jb(5),p.Ic(e.util.general.name),p.Jb(2),p.Kc("",e.getDate(e.from)," to ",e.getDate(e.to)," "),p.Jb(2),p.Jc(" ",e.util.general.name,""),p.Jb(2),p.Jc(" ",e.util.general.address," "),p.Jb(2),p.Kc(" ",e.util.general.city," ",e.util.general.state,""),p.Jb(2),p.Kc(" ",e.util.general.country," ",e.util.general.zip," "),p.Jb(2),p.Jc(" ",e.util.general.email,""),p.Jb(2),p.Jc(" ",e.util.general.mobile," "),p.Jb(2),p.Jc(" ",e.util.store.name," "),p.Jb(2),p.Ic(e.today()),p.Jb(5),p.Jc("",e.util.translate("Id")," "),p.Jb(2),p.Jc("",e.util.translate("Ordered on")," "),p.Jb(2),p.Jc("",e.util.translate("Items")," "),p.Jb(2),p.Jc("",e.util.translate("Total")," "),p.Jb(2),p.Jc("",e.util.translate("Discount")," "),p.Jb(2),p.Jc("",e.util.translate("Grand Total")," "),p.Jb(2),p.Jc("",e.util.translate("Commission")," "),p.Jb(2),p.rc("ngForOf",e.storeOrder),p.Jb(5),p.Jc(" ",e.util.translate("Total")," "),p.Jb(2),p.Jc(" ",e.util.translate("Commission")," "),p.Jb(2),p.Jc(" ",e.util.translate("Amount Pay")," "),p.Jb(3),p.rc("ngIf","left"===e.util.cside),p.Jb(1),p.rc("ngIf","right"===e.util.cside),p.Jb(2),p.rc("ngIf","left"===e.util.cside),p.Jb(1),p.rc("ngIf","right"===e.util.cside),p.Jb(2),p.rc("ngIf","left"===e.util.cside),p.Jb(1),p.rc("ngIf","right"===e.util.cside)}}var P,$,j,N=[{path:"",component:(P=function(){function t(n,i){e(this,t),this.util=n,this.api=i,this.stores=[],this.allOrders=[],this.storeOrder=[],this.totalAmount=0,this.commisionAmount=0,this.toPay=0,this.totalAmountsFromOrder=0,this.storeId=parseInt(localStorage.getItem("uid"))}return c(t,[{key:"ngOnInit",value:function(){}},{key:"getStats",value:function(){var t=this;if(console.log("from",this.from),console.log("to",this.to),!this.from||!this.to)return console.log("not valid"),this.util.error(this.util.translate("All Fields are required")),!1;console.log("ok");var n={id:localStorage.getItem("uid"),from:d(this.from,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm"),to:d(this.to,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm")};console.log(n),this.util.show(),this.apiCalled=!1,this.storeOrder=[],this.api.post_private("v1/orders/getStoreStatsDataWithDates",n).then(function(n){if(t.apiCalled=!0,t.util.hide(),console.log(n),n&&200==n.status&&n.data.length){t.storecommission=n.commission.commission,console.log("commustion",t.storecommission);var e=0;n.data.forEach(function(n){return Object(u.__awaiter)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var i,c,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=function(t){try{return JSON.parse(t),!0}catch(n){return!1}}(n.orders),!t.t0){t.next=9;break}return n.orders=JSON.parse(n.orders),n.date_time=d(n.date_time).format("dddd, MMMM Do YYYY"),t.next=6,n.orders.filter(function(t){return t.store_id==r.storeId});case 6:n.orders=t.sent,console.log(n.discount),t.t0=function(t){try{return JSON.parse(t),!0}catch(n){return!1}}(n.status);case 9:if(!t.t0){t.next=19;break}return i=JSON.parse(n.status),t.next=13,i.filter(function(t){return t.id==r.storeId});case 13:if(c=t.sent,t.t1=c&&c.length&&"delivered"==c[0].status,!t.t1){t.next=19;break}return t.next=18,n.orders.forEach(function(t){t.variations&&""!==t.variations&&"string"==typeof t.variations&&(t.variations=JSON.parse(t.variations),console.log(t.variant),null==t.variant&&(t.variant=0)),e+=t&&0==t.discount?1==t.size||1==t.size?t.variations[0].items[t.variant].discount&&0!==t.variations[0].items[t.variant].discount?parseFloat(t.variations[0].items[t.variant].discount)*t.quantiy:parseFloat(t.variations[0].items[t.variant].price)*t.quantiy:parseFloat(t.original_price)*t.quantiy:1==t.size||1==t.size?t.variations[0].items[t.variant].discount&&0!==t.variations[0].items[t.variant].discount?parseFloat(t.variations[0].items[t.variant].discount)*t.quantiy:parseFloat(t.variations[0].items[t.variant].price)*t.quantiy:parseFloat(t.sell_price)*t.quantiy});case 18:this.storeOrder.push(n);case 19:case"end":return t.stop()}},t,this)}))}),setTimeout(function(){console.log(t.storeOrder),console.log(e,t.storecommission);var n=e/100*parseFloat(t.storecommission);console.log("commistion====>>>>>",n.toFixed(2)),t.commisionAmount=n.toFixed(2),t.totalAmount=e,t.toPay=t.commisionAmount},1e3)}},function(n){t.util.hide(),console.log(n),t.apiCalled=!0,t.util.error(t.util.translate("Something went wrong"))}).catch(function(n){t.util.hide(),console.log(n),t.apiCalled=!0,t.util.error(t.util.translate("Something went wrong"))})}},{key:"getCommisions",value:function(t){return(parseFloat(t)*this.storecommission/100).toFixed(2)}},{key:"donwloadPDF",value:function(){}},{key:"today",value:function(){return d().format("ll")}},{key:"getDate",value:function(t){return d(t).format("ll")}},{key:"getName",value:function(){return this.storeOrder[0].name+"_"+d(this.from).format("DDMMYYYY")+"_"+d(this.to).format("DDMMYYYY")}}]),t}(),P.\u0275fac=function(t){return new(t||P)(p.Vb(b.a),p.Vb(f.a))},P.\u0275cmp=p.Pb({type:P,selectors:[["app-stats"]],decls:31,vars:12,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-body","reset-table","p-t-0"],[1,"form-group","row"],[1,"col-sm-6"],["type","date",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-sm-12"],[1,"btn","btn-danger","btn-round",3,"click"],["style","margin-left: 20px;","printSectionId","print-section","ngxPrint","","class","btn btn-primary",3,"useExistingCss","printTitle",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","row","id","print-section",4,"ngIf"],["printSectionId","print-section","ngxPrint","",1,"btn","btn-primary",2,"margin-left","20px",3,"useExistingCss","printTitle"],[1,"icofont","icofont-printer"],[2,"text-align","center"],["id","print-section",1,"row"],[1,"card-body",2,"padding","20px"],[2,"text-align","center","color","#7ec6aa"],[2,"text-align","center","color","#ED7669"],[2,"text-align","right","font-weight","bold","margin","0px !important","color","#7EC6AA"],[2,"text-align","right","font-weight","bold","margin","0px !important"],[2,"text-align","left","font-weight","bold","margin","0px","color","#aaafad"],[2,"text-align","left","font-weight","bold","color","#7EC6AA"],[1,"table","table-striped"],[1,"text-uppercase",2,"color","#7ec6aa"],["style","background-color: #F5F8FA;",4,"ngFor","ngForOf"],[1,"row",2,"padding","20px"],[1,"col-sm-4"],[1,"col-sm-2"],[2,"color","black !important","margin","0px !important","text-align","right"],[4,"ngIf"],[2,"background-color","#F5F8FA"],[4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(p.Wb(0,"ngx-spinner"),p.bc(1,"div",0),p.bc(2,"div",1),p.bc(3,"div",2),p.bc(4,"div",3),p.bc(5,"div",4),p.Hc(6),p.ac(),p.bc(7,"div",5),p.bc(8,"div",1),p.bc(9,"div",2),p.bc(10,"div",3),p.bc(11,"div",5),p.bc(12,"h5"),p.Hc(13),p.ac(),p.ac(),p.bc(14,"div",6),p.bc(15,"div",7),p.bc(16,"div",8),p.bc(17,"label"),p.Hc(18),p.ac(),p.bc(19,"input",9),p.ic("ngModelChange",function(t){return n.from=t}),p.ac(),p.ac(),p.bc(20,"div",8),p.bc(21,"label"),p.Hc(22),p.ac(),p.bc(23,"input",9),p.ic("ngModelChange",function(t){return n.to=t}),p.ac(),p.ac(),p.ac(),p.bc(24,"div",7),p.bc(25,"div",10),p.bc(26,"button",11),p.ic("click",function(){return n.getStats()}),p.Hc(27),p.ac(),p.Gc(28,y,3,3,"button",12),p.ac(),p.ac(),p.ac(),p.ac(),p.ac(),p.ac(),p.Gc(29,J,2,1,"h2",13),p.Gc(30,K,62,30,"div",14),p.ac(),p.ac(),p.ac(),p.ac(),p.ac()),2&t&&(p.Jb(6),p.Jc(" ",n.util.translate("Stats")," "),p.Jb(7),p.Jc("",n.util.translate("Get Stats")," "),p.Jb(5),p.Jc("",n.util.translate("From Date")," "),p.Jb(1),p.rc("ngModel",n.from)("placeholder",n.util.translate("From Date")),p.Jb(3),p.Jc("",n.util.translate("To Date")," "),p.Jb(1),p.rc("ngModel",n.to)("placeholder",n.util.translate("To Date")),p.Jb(4),p.Jc("",n.util.translate("Get Stats")," "),p.Jb(1),p.rc("ngIf",n.from&&n.to&&(null==n.storeOrder?null:n.storeOrder.length)),p.Jb(1),p.rc("ngIf",n.from&&n.to&&!(null!=n.storeOrder&&n.storeOrder.length)&&n.apiCalled),p.Jb(1),p.rc("ngIf",n.from&&n.to&&(null==n.storeOrder?null:n.storeOrder.length)))},directives:[m.a,g.a,g.g,g.j,l.l,h,l.k],styles:["p[_ngcontent-%COMP%]{margin:0!important}"]}),P)}],W=((j=function t(){e(this,t)}).\u0275fac=function(t){return new(t||j)},j.\u0275mod=p.Tb({type:j}),j.\u0275inj=p.Sb({imports:[[s.g.forChild(N)],s.g]}),j),q=(($=function t(){e(this,t)}).\u0275fac=function(t){return new(t||$)},$.\u0275mod=p.Tb({type:$}),$.\u0275inj=p.Sb({imports:[[l.c,W,v,m.b,g.e]]}),$)}}])}();