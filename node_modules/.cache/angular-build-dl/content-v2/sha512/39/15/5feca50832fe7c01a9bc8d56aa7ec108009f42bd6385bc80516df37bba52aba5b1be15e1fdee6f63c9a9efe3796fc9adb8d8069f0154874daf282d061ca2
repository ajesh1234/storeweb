(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"iU+t":function(t,i,c){"use strict";c.r(i),c.d(i,"StatsModule",function(){return $});var n=c("SVse"),e=c("iInd"),r=c("mrSG"),a=c("wd/R"),o=c("H+bZ"),s=c("2Rin"),l=c("8Y7J"),u=c("7g+E"),d=c("s7LF");let b=(()=>{class t{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(t){for(let i in t)t.hasOwnProperty(i)&&this._printStyle.push((i+JSON.stringify(t[i])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(t){let i=function(t){return`<link rel="stylesheet" type="text/css" href="${t}">`};if(-1!==t.indexOf(",")){const c=t.split(",");for(let t of c)this._styleSheetFile=this._styleSheetFile+i(t)}else this._styleSheetFile=i(t)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(t){const i=[],c=document.getElementsByTagName(t);for(let n=0;n<c.length;n++)i.push(c[n].outerHTML);return i.join("\r\n")}getFormData(t){for(var i=0;i<t.length;i++)t[i].defaultValue=t[i].value,t[i].checked&&(t[i].defaultChecked=!0)}getHtmlContents(){let t=document.getElementById(this.printSectionId),i=t.getElementsByTagName("input");this.getFormData(i);let c=t.getElementsByTagName("textarea");return this.getFormData(c),t.innerHTML}print(){let t,i,c="",n="";const e=this.getElementTag("base");this.useExistingCss&&(c=this.getElementTag("style"),n=this.getElementTag("link")),t=this.getHtmlContents(),i=window.open("","_blank","top=0,left=0,height=auto,width=auto"),i.document.open(),i.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${e}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${c}\n          ${n}\n        </head>\n        <body>\n          ${t}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),i.document.close()}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=l.Qb({type:t,selectors:[["button","ngxPrint",""]],hostBindings:function(t,i){1&t&&l.ic("click",function(){return i.print()})},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),t})(),p=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.Tb({type:t}),t.\u0275inj=l.Sb({imports:[[]]}),t})();function g(t,i){if(1&t&&(l.bc(0,"button",15),l.Wb(1,"i",16),l.Hc(2),l.ac()),2&t){const t=l.lc();l.rc("useExistingCss",!0)("printTitle",t.storename),l.Jb(2),l.Jc("",t.util.translate("Print")," ")}}function m(t,i){if(1&t&&(l.bc(0,"h2",17),l.Hc(1),l.ac()),2&t){const t=l.lc();l.Jb(1),l.Jc(" ",t.util.translate("No Orders Found")," ")}}function h(t,i){1&t&&(l.bc(0,"span"),l.Hc(1,","),l.ac())}function f(t,i){if(1&t&&(l.bc(0,"p"),l.Hc(1),l.Gc(2,h,2,0,"span",33),l.ac()),2&t){const t=i.$implicit,c=i.index,n=l.lc().$implicit;l.Jb(1),l.Jc(" ",t.name," "),l.Jb(1),l.rc("ngIf",n.orders.length-1!==c)}}function J(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",i.util.currecny," ",t.total," ")}}function y(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",t.total," ",i.util.currecny,"")}}function v(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",i.util.currecny," ",t.discount," ")}}function H(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",t.discount," ",i.util.currecny,"")}}function S(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",i.util.currecny," ",t.grand_total," ")}}function w(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",t.grand_total," ",i.util.currecny,"")}}function I(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",i.util.currecny," ",i.getCommisions(t.total)," ")}}function F(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc().$implicit,i=l.lc(2);l.Jb(1),l.Kc("",i.getCommisions(t.total)," ",i.util.currecny,"")}}function x(t,i){if(1&t&&(l.bc(0,"tr",34),l.bc(1,"td"),l.Hc(2),l.ac(),l.bc(3,"td"),l.Hc(4),l.ac(),l.bc(5,"td"),l.Gc(6,f,3,2,"p",35),l.ac(),l.bc(7,"td"),l.Gc(8,J,2,2,"span",33),l.Gc(9,y,2,2,"span",33),l.ac(),l.bc(10,"td"),l.Gc(11,v,2,2,"span",33),l.Gc(12,H,2,2,"span",33),l.ac(),l.bc(13,"td"),l.Gc(14,S,2,2,"span",33),l.Gc(15,w,2,2,"span",33),l.ac(),l.bc(16,"td"),l.Gc(17,I,2,2,"span",33),l.Gc(18,F,2,2,"span",33),l.ac(),l.ac()),2&t){const t=i.$implicit,c=l.lc(2);l.Jb(2),l.Jc("#",t.id,""),l.Jb(2),l.Ic(t.date_time),l.Jb(2),l.rc("ngForOf",t.orders),l.Jb(2),l.rc("ngIf","left"===c.util.cside),l.Jb(1),l.rc("ngIf","right"===c.util.cside),l.Jb(2),l.rc("ngIf","left"===c.util.cside),l.Jb(1),l.rc("ngIf","right"===c.util.cside),l.Jb(2),l.rc("ngIf","left"===c.util.cside),l.Jb(1),l.rc("ngIf","right"===c.util.cside),l.Jb(2),l.rc("ngIf","left"===c.util.cside),l.Jb(1),l.rc("ngIf","right"===c.util.cside)}}function D(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc(2);l.Jb(1),l.Kc("",t.util.currecny," ",t.totalAmount," ")}}function O(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc(2);l.Jb(1),l.Kc("",t.totalAmount," ",t.util.currecny,"")}}function Y(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc(2);l.Jb(1),l.Kc("",t.util.currecny," ",t.commisionAmount," ")}}function T(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc(2);l.Jb(1),l.Kc("",t.commisionAmount," ",t.util.currecny,"")}}function C(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc(2);l.Jb(1),l.Kc("",t.util.currecny," ",t.toPay,"")}}function M(t,i){if(1&t&&(l.bc(0,"span"),l.Hc(1),l.ac()),2&t){const t=l.lc(2);l.Jb(1),l.Kc("",t.toPay," ",t.util.currecny,"")}}function G(t,i){if(1&t&&(l.bc(0,"div",18),l.bc(1,"div",2),l.bc(2,"div",3),l.bc(3,"div",19),l.bc(4,"h3",20),l.Hc(5),l.ac(),l.bc(6,"p",21),l.Hc(7),l.ac(),l.bc(8,"p",22),l.Hc(9),l.ac(),l.bc(10,"p",23),l.Hc(11),l.Wb(12,"br"),l.Hc(13),l.Wb(14,"br"),l.Hc(15),l.ac(),l.bc(16,"p",23),l.Hc(17),l.ac(),l.bc(18,"p",23),l.Hc(19),l.ac(),l.bc(20,"p",24),l.Hc(21),l.ac(),l.bc(22,"p",25),l.Hc(23),l.ac(),l.bc(24,"table",26),l.bc(25,"thead"),l.bc(26,"tr",27),l.bc(27,"th"),l.Hc(28),l.ac(),l.bc(29,"th"),l.Hc(30),l.ac(),l.bc(31,"th"),l.Hc(32),l.ac(),l.bc(33,"th"),l.Hc(34),l.ac(),l.bc(35,"th"),l.Hc(36),l.ac(),l.bc(37,"th"),l.Hc(38),l.ac(),l.bc(39,"th"),l.Hc(40),l.ac(),l.ac(),l.ac(),l.bc(41,"tbody"),l.Gc(42,x,19,11,"tr",28),l.ac(),l.ac(),l.bc(43,"div",29),l.Wb(44,"div",8),l.bc(45,"div",30),l.bc(46,"p",22),l.Hc(47),l.ac(),l.bc(48,"p",22),l.Hc(49),l.ac(),l.bc(50,"p",22),l.Hc(51),l.ac(),l.ac(),l.bc(52,"div",31),l.bc(53,"p",32),l.Gc(54,D,2,2,"span",33),l.Gc(55,O,2,2,"span",33),l.ac(),l.bc(56,"p",32),l.Gc(57,Y,2,2,"span",33),l.Gc(58,T,2,2,"span",33),l.ac(),l.bc(59,"p",32),l.Gc(60,C,2,2,"span",33),l.Gc(61,M,2,2,"span",33),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()),2&t){const t=l.lc();l.Jb(5),l.Ic(t.util.general.name),l.Jb(2),l.Kc("",t.getDate(t.from)," to ",t.getDate(t.to)," "),l.Jb(2),l.Jc(" ",t.util.general.name,""),l.Jb(2),l.Jc(" ",t.util.general.address," "),l.Jb(2),l.Kc(" ",t.util.general.city," ",t.util.general.state,""),l.Jb(2),l.Kc(" ",t.util.general.country," ",t.util.general.zip," "),l.Jb(2),l.Jc(" ",t.util.general.email,""),l.Jb(2),l.Jc(" ",t.util.general.mobile," "),l.Jb(2),l.Jc(" ",t.util.store.name," "),l.Jb(2),l.Ic(t.today()),l.Jb(5),l.Jc("",t.util.translate("Id")," "),l.Jb(2),l.Jc("",t.util.translate("Ordered on")," "),l.Jb(2),l.Jc("",t.util.translate("Items")," "),l.Jb(2),l.Jc("",t.util.translate("Total")," "),l.Jb(2),l.Jc("",t.util.translate("Discount")," "),l.Jb(2),l.Jc("",t.util.translate("Grand Total")," "),l.Jb(2),l.Jc("",t.util.translate("Commission")," "),l.Jb(2),l.rc("ngForOf",t.storeOrder),l.Jb(5),l.Jc(" ",t.util.translate("Total")," "),l.Jb(2),l.Jc(" ",t.util.translate("Commission")," "),l.Jb(2),l.Jc(" ",t.util.translate("Amount Pay")," "),l.Jb(3),l.rc("ngIf","left"===t.util.cside),l.Jb(1),l.rc("ngIf","right"===t.util.cside),l.Jb(2),l.rc("ngIf","left"===t.util.cside),l.Jb(1),l.rc("ngIf","right"===t.util.cside),l.Jb(2),l.rc("ngIf","left"===t.util.cside),l.Jb(1),l.rc("ngIf","right"===t.util.cside)}}const E=[{path:"",component:(()=>{class t{constructor(t,i){this.util=t,this.api=i,this.stores=[],this.allOrders=[],this.storeOrder=[],this.totalAmount=0,this.commisionAmount=0,this.toPay=0,this.totalAmountsFromOrder=0,this.storeId=parseInt(localStorage.getItem("uid"))}ngOnInit(){}getStats(){if(console.log("from",this.from),console.log("to",this.to),!this.from||!this.to)return console.log("not valid"),this.util.error(this.util.translate("All Fields are required")),!1;{console.log("ok");const t={id:localStorage.getItem("uid"),from:a(this.from,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm"),to:a(this.to,"YYYY-MM-DD HH:mm A").utc(!1).format("YYYY-MM-DD HH:mm")};console.log(t),this.util.show(),this.apiCalled=!1,this.storeOrder=[],this.api.post_private("v1/orders/getStoreStatsDataWithDates",t).then(t=>{if(this.apiCalled=!0,this.util.hide(),console.log(t),t&&200==t.status&&t.data.length){this.storecommission=t.commission.commission,console.log("commustion",this.storecommission);let i=0;t.data.forEach(t=>Object(r.__awaiter)(this,void 0,void 0,function*(){if((t=>{try{return JSON.parse(t),!0}catch(i){return!1}})(t.orders)&&(t.orders=JSON.parse(t.orders),t.date_time=a(t.date_time).format("dddd, MMMM Do YYYY"),t.orders=yield t.orders.filter(t=>t.store_id==this.storeId),console.log(t.discount),(t=>{try{return JSON.parse(t),!0}catch(i){return!1}})(t.status))){const c=JSON.parse(t.status),n=yield c.filter(t=>t.id==this.storeId);n&&n.length&&"delivered"==n[0].status&&(yield t.orders.forEach(t=>{t.variations&&""!==t.variations&&"string"==typeof t.variations&&(t.variations=JSON.parse(t.variations),console.log(t.variant),null==t.variant&&(t.variant=0)),i+=t&&0==t.discount?1==t.size||1==t.size?t.variations[0].items[t.variant].discount&&0!==t.variations[0].items[t.variant].discount?parseFloat(t.variations[0].items[t.variant].discount)*t.quantiy:parseFloat(t.variations[0].items[t.variant].price)*t.quantiy:parseFloat(t.original_price)*t.quantiy:1==t.size||1==t.size?t.variations[0].items[t.variant].discount&&0!==t.variations[0].items[t.variant].discount?parseFloat(t.variations[0].items[t.variant].discount)*t.quantiy:parseFloat(t.variations[0].items[t.variant].price)*t.quantiy:parseFloat(t.sell_price)*t.quantiy}),this.storeOrder.push(t))}})),setTimeout(()=>{console.log(this.storeOrder),console.log(i,this.storecommission);const t=i/100*parseFloat(this.storecommission);console.log("commistion====>>>>>",t.toFixed(2)),this.commisionAmount=t.toFixed(2),this.totalAmount=i,this.toPay=this.commisionAmount},1e3)}},t=>{this.util.hide(),console.log(t),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))}).catch(t=>{this.util.hide(),console.log(t),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))})}}getCommisions(t){return(parseFloat(t)*this.storecommission/100).toFixed(2)}donwloadPDF(){}today(){return a().format("ll")}getDate(t){return a(t).format("ll")}getName(){return this.storeOrder[0].name+"_"+a(this.from).format("DDMMYYYY")+"_"+a(this.to).format("DDMMYYYY")}}return t.\u0275fac=function(i){return new(i||t)(l.Vb(s.a),l.Vb(o.a))},t.\u0275cmp=l.Pb({type:t,selectors:[["app-stats"]],decls:31,vars:12,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-body","reset-table","p-t-0"],[1,"form-group","row"],[1,"col-sm-6"],["type","date",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-sm-12"],[1,"btn","btn-danger","btn-round",3,"click"],["style","margin-left: 20px;","printSectionId","print-section","ngxPrint","","class","btn btn-primary",3,"useExistingCss","printTitle",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","row","id","print-section",4,"ngIf"],["printSectionId","print-section","ngxPrint","",1,"btn","btn-primary",2,"margin-left","20px",3,"useExistingCss","printTitle"],[1,"icofont","icofont-printer"],[2,"text-align","center"],["id","print-section",1,"row"],[1,"card-body",2,"padding","20px"],[2,"text-align","center","color","#7ec6aa"],[2,"text-align","center","color","#ED7669"],[2,"text-align","right","font-weight","bold","margin","0px !important","color","#7EC6AA"],[2,"text-align","right","font-weight","bold","margin","0px !important"],[2,"text-align","left","font-weight","bold","margin","0px","color","#aaafad"],[2,"text-align","left","font-weight","bold","color","#7EC6AA"],[1,"table","table-striped"],[1,"text-uppercase",2,"color","#7ec6aa"],["style","background-color: #F5F8FA;",4,"ngFor","ngForOf"],[1,"row",2,"padding","20px"],[1,"col-sm-4"],[1,"col-sm-2"],[2,"color","black !important","margin","0px !important","text-align","right"],[4,"ngIf"],[2,"background-color","#F5F8FA"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(l.Wb(0,"ngx-spinner"),l.bc(1,"div",0),l.bc(2,"div",1),l.bc(3,"div",2),l.bc(4,"div",3),l.bc(5,"div",4),l.Hc(6),l.ac(),l.bc(7,"div",5),l.bc(8,"div",1),l.bc(9,"div",2),l.bc(10,"div",3),l.bc(11,"div",5),l.bc(12,"h5"),l.Hc(13),l.ac(),l.ac(),l.bc(14,"div",6),l.bc(15,"div",7),l.bc(16,"div",8),l.bc(17,"label"),l.Hc(18),l.ac(),l.bc(19,"input",9),l.ic("ngModelChange",function(t){return i.from=t}),l.ac(),l.ac(),l.bc(20,"div",8),l.bc(21,"label"),l.Hc(22),l.ac(),l.bc(23,"input",9),l.ic("ngModelChange",function(t){return i.to=t}),l.ac(),l.ac(),l.ac(),l.bc(24,"div",7),l.bc(25,"div",10),l.bc(26,"button",11),l.ic("click",function(){return i.getStats()}),l.Hc(27),l.ac(),l.Gc(28,g,3,3,"button",12),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.ac(),l.Gc(29,m,2,1,"h2",13),l.Gc(30,G,62,30,"div",14),l.ac(),l.ac(),l.ac(),l.ac(),l.ac()),2&t&&(l.Jb(6),l.Jc(" ",i.util.translate("Stats")," "),l.Jb(7),l.Jc("",i.util.translate("Get Stats")," "),l.Jb(5),l.Jc("",i.util.translate("From Date")," "),l.Jb(1),l.rc("ngModel",i.from)("placeholder",i.util.translate("From Date")),l.Jb(3),l.Jc("",i.util.translate("To Date")," "),l.Jb(1),l.rc("ngModel",i.to)("placeholder",i.util.translate("To Date")),l.Jb(4),l.Jc("",i.util.translate("Get Stats")," "),l.Jb(1),l.rc("ngIf",i.from&&i.to&&(null==i.storeOrder?null:i.storeOrder.length)),l.Jb(1),l.rc("ngIf",i.from&&i.to&&!(null!=i.storeOrder&&i.storeOrder.length)&&i.apiCalled),l.Jb(1),l.rc("ngIf",i.from&&i.to&&(null==i.storeOrder?null:i.storeOrder.length)))},directives:[u.a,d.a,d.g,d.j,n.l,b,n.k],styles:["p[_ngcontent-%COMP%]{margin:0!important}"]}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.Tb({type:t}),t.\u0275inj=l.Sb({imports:[[e.g.forChild(E)],e.g]}),t})(),$=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.Tb({type:t}),t.\u0275inj=l.Sb({imports:[[n.c,_,p,u.b,d.e]]}),t})()}}]);