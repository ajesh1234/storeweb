!function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var o=0;o<i.length;o++){var e=i[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Ityv:function(o,e,r){"use strict";r.r(e),r.d(e,"ForgotModule",function(){return V});var n=r("SVse"),c=r("H+bZ"),a=r("2Rin"),s=r("PSD3"),l=r.n(s),u=r("JZFu"),d=r("8Y7J"),p=r("7g+E"),h=r("s7LF"),b=r("BstE"),f=function(){return{width:"40px",height:"40px",border:"1px solid lightgray","background-color":"white"}},g=function(t){return{length:6,inputStyles:t}};function v(t,i){if(1&t){var o=d.cc();d.bc(0,"div",21),d.bc(1,"p"),d.Hc(2),d.ac(),d.bc(3,"ng-otp-input",22),d.ic("onInputChange",function(t){return d.Bc(o),d.lc(2).onOtpChange(t)}),d.ac(),d.ac()}if(2&t){var e=d.lc(2);d.Jb(2),d.Jc("",e.util.translate("Enter OTP")," "),d.Jb(1),d.rc("config",d.wc(3,g,d.vc(2,f)))}}function m(t,i){if(1&t){var o=d.cc();d.bc(0,"button",23),d.ic("click",function(){return d.Bc(o),d.lc(2).goToTabs()}),d.Hc(1),d.ac()}if(2&t){var e=d.lc(2);d.Jb(1),d.Ic(e.util.translate("Send OTP"))}}function w(t,i){if(1&t){var o=d.cc();d.bc(0,"button",23),d.ic("click",function(){return d.Bc(o),d.lc(2).verifyOTP()}),d.Hc(1),d.ac()}if(2&t){var e=d.lc(2);d.Jb(1),d.Ic(e.util.translate("Verify OTP"))}}var y=function(){return{standalone:!0}};function P(t,i){if(1&t){var o=d.cc();d.bc(0,"form"),d.bc(1,"div",10),d.Wb(2,"img",11),d.ac(),d.bc(3,"h1"),d.Hc(4),d.ac(),d.bc(5,"p",12),d.Hc(6),d.ac(),d.bc(7,"div",13),d.bc(8,"div",14),d.bc(9,"span",15),d.Wb(10,"i",16),d.ac(),d.ac(),d.bc(11,"input",17),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc().email=t}),d.ac(),d.ac(),d.Gc(12,v,4,5,"div",18),d.bc(13,"div",4),d.bc(14,"div",19),d.Gc(15,m,2,1,"button",20),d.Gc(16,w,2,1,"button",20),d.ac(),d.ac(),d.ac()}if(2&t){var e=d.lc();d.Jb(4),d.Ic(e.util.translate("Reset Password")),d.Jb(2),d.Ic(e.util.translate("Send OTP")),d.Jb(5),d.rc("ngModel",e.email)("placeholder",e.util.translate("Email address"))("ngModelOptions",d.vc(8,y)),d.Jb(1),d.rc("ngIf",1==e.otpSent),d.Jb(3),d.rc("ngIf",0==e.otpSent),d.Jb(1),d.rc("ngIf",1==e.otpSent)}}function _(t,i){if(1&t){var o=d.cc();d.bc(0,"form"),d.bc(1,"div",10),d.Wb(2,"img",11),d.ac(),d.bc(3,"h1"),d.Hc(4),d.ac(),d.bc(5,"p",12),d.Hc(6),d.ac(),d.bc(7,"div",24),d.bc(8,"div",14),d.bc(9,"span",15),d.Wb(10,"i",25),d.ac(),d.ac(),d.bc(11,"input",26),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc().password=t}),d.ac(),d.ac(),d.bc(12,"div",24),d.bc(13,"div",14),d.bc(14,"span",15),d.Wb(15,"i",25),d.ac(),d.ac(),d.bc(16,"input",26),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc().confirm=t}),d.ac(),d.ac(),d.bc(17,"div",4),d.bc(18,"div",19),d.bc(19,"button",23),d.ic("click",function(){return d.Bc(o),d.lc().updatePassword()}),d.Hc(20),d.ac(),d.ac(),d.ac(),d.ac()}if(2&t){var e=d.lc();d.Jb(4),d.Ic(e.util.translate("Reset Password")),d.Jb(2),d.Ic(e.util.translate("Update Password")),d.Jb(5),d.rc("ngModel",e.password)("placeholder",e.util.translate("Password"))("ngModelOptions",d.vc(9,y)),d.Jb(5),d.rc("ngModel",e.confirm)("placeholder",e.util.translate("Confirm Password"))("ngModelOptions",d.vc(10,y)),d.Jb(4),d.Ic(e.util.translate("Update"))}}function O(t,i){if(1&t&&(d.bc(0,"option",33),d.Hc(1),d.ac()),2&t){var o=i.$implicit;d.rc("value",o.dialling_code),d.Jb(1),d.Jc(" ",o.country_name," ")}}function T(t,i){if(1&t){var o=d.cc();d.bc(0,"div"),d.bc(1,"select",31),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc(2).country_code=t}),d.Gc(2,O,2,2,"option",32),d.ac(),d.ac()}if(2&t){var e=d.lc(2);d.Jb(1),d.rc("ngModel",e.country_code)("ngModelOptions",d.vc(3,y)),d.Jb(1),d.rc("ngForOf",e.util.countrys)}}function J(t,i){if(1&t){var o=d.cc();d.bc(0,"div"),d.bc(1,"input",34),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc(2).country_code=t}),d.ac(),d.ac()}if(2&t){var e=d.lc(2);d.Jb(1),d.rc("ngModel",e.country_code)("placeholder",e.util.translate("Country Code"))("disabled",!0)("ngModelOptions",d.vc(4,y))}}function k(t,i){if(1&t){var o=d.cc();d.bc(0,"div",21),d.bc(1,"p"),d.Hc(2,"Enter OTP"),d.ac(),d.bc(3,"ng-otp-input",22),d.ic("onInputChange",function(t){return d.Bc(o),d.lc(2).onOtpChange(t)}),d.ac(),d.ac()}2&t&&(d.Jb(3),d.rc("config",d.wc(2,g,d.vc(1,f))))}function M(t,i){if(1&t){var o=d.cc();d.bc(0,"button",23),d.ic("click",function(){return d.Bc(o),d.lc(2).sendPhoneOTP()}),d.Hc(1),d.ac()}if(2&t){var e=d.lc(2);d.Jb(1),d.Ic(e.util.translate("Send OTP"))}}function I(t,i){if(1&t){var o=d.cc();d.bc(0,"button",23),d.ic("click",function(){return d.Bc(o),d.lc(2).verifyOTP()}),d.Hc(1),d.ac()}if(2&t){var e=d.lc(2);d.Jb(1),d.Ic(e.util.translate("Verify OTP"))}}function C(t,i){if(1&t){var o=d.cc();d.bc(0,"form"),d.bc(1,"div",10),d.Wb(2,"img",11),d.ac(),d.bc(3,"h1"),d.Hc(4),d.ac(),d.bc(5,"p",12),d.Hc(6),d.ac(),d.bc(7,"div",4),d.bc(8,"div",27),d.Gc(9,T,3,4,"div",9),d.Gc(10,J,2,5,"div",9),d.ac(),d.bc(11,"div",28),d.bc(12,"div",13),d.bc(13,"div",14),d.bc(14,"span",15),d.Wb(15,"i",29),d.ac(),d.ac(),d.bc(16,"input",30),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc().mobile=t}),d.ac(),d.ac(),d.ac(),d.ac(),d.Gc(17,k,4,4,"div",18),d.bc(18,"div",4),d.bc(19,"div",19),d.Gc(20,M,2,1,"button",20),d.Gc(21,I,2,1,"button",20),d.ac(),d.ac(),d.ac()}if(2&t){var e=d.lc();d.Jb(4),d.Ic(e.util.translate("Reset Password")),d.Jb(2),d.Ic(e.util.translate("Send OTP")),d.Jb(3),d.rc("ngIf",null==e.util.countrys?null:e.util.countrys.length),d.Jb(1),d.rc("ngIf",!(null!=e.util.countrys&&e.util.countrys.length)),d.Jb(6),d.rc("ngModel",e.mobile)("placeholder",e.util.translate("Phone"))("ngModelOptions",d.vc(10,y)),d.Jb(1),d.rc("ngIf",1==e.otpSent),d.Jb(3),d.rc("ngIf",0==e.otpSent),d.Jb(1),d.rc("ngIf",1==e.otpSent)}}function W(t,i){if(1&t){var o=d.cc();d.bc(0,"form"),d.bc(1,"div",10),d.Wb(2,"img",11),d.ac(),d.bc(3,"h1"),d.Hc(4),d.ac(),d.bc(5,"p",12),d.Hc(6),d.ac(),d.bc(7,"div",24),d.bc(8,"div",14),d.bc(9,"span",15),d.Wb(10,"i",25),d.ac(),d.ac(),d.bc(11,"input",26),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc().password=t}),d.ac(),d.ac(),d.bc(12,"div",24),d.bc(13,"div",14),d.bc(14,"span",15),d.Wb(15,"i",25),d.ac(),d.ac(),d.bc(16,"input",26),d.ic("ngModelChange",function(t){return d.Bc(o),d.lc().confirm=t}),d.ac(),d.ac(),d.bc(17,"div",4),d.bc(18,"div",19),d.bc(19,"button",23),d.ic("click",function(){return d.Bc(o),d.lc().updatePassword()}),d.Hc(20),d.ac(),d.ac(),d.ac(),d.ac()}if(2&t){var e=d.lc();d.Jb(4),d.Ic(e.util.translate("Reset Password")),d.Jb(2),d.Ic(e.util.translate("Update Password")),d.Jb(5),d.rc("ngModel",e.password)("placeholder",e.util.translate("Password"))("ngModelOptions",d.vc(9,y)),d.Jb(5),d.rc("ngModel",e.confirm)("placeholder",e.util.translate("Confirm Password"))("ngModelOptions",d.vc(10,y)),d.Jb(4),d.Ic(e.util.translate("Update"))}}var H,B,E,S=((H=function(){function o(i,e,r){var n=this;t(this,o),this.api=i,this.util=e,this.location=r,this.div=1,this.otp_id="",this.email="",this.otpSent=!1,this.otp="",this.password="",this.confirm="",this.temp="",this.country_code="",this.mobile="",setTimeout(function(){n.country_code=n.util.default_country_code},1e3)}var e,r,n;return e=o,(r=[{key:"ngOnInit",value:function(){var t=this;setTimeout(function(){t.recaptchaVerifier=new u.a.auth.RecaptchaVerifier("sign-in-button",{size:"invisible",callback:function(t){},"expired-callback":function(){}})},5e3)}},{key:"onOtpChange",value:function(t){console.log(t),this.otp=t}},{key:"goToTabs",value:function(){var t=this;if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.email))return this.util.error(this.util.translate("Please enter valid email")),!1;console.log("login"),this.util.show(),this.api.post_public("v1/auth/verifyEmailForReset",{email:this.email}).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200===i.status&&!0===i.data&&i.otp_id?(t.otpSent=!0,t.otp_id=i.otp_id):i&&i.status&&500===i.status&&!1===i.data&&t.util.error(i.message)},function(i){t.util.hide(),t.util.apiErrorHandler(i)}).catch(function(i){t.util.hide(),console.log(i),t.util.apiErrorHandler(i)})}},{key:"goToBack",value:function(){this.location.back()}},{key:"sendPhoneOTP",value:function(){var t=this;if("2"==this.util.smsGateway){var i={country_code:"+"+this.country_code,mobile:this.mobile};this.util.show(),this.api.post_public("v1/auth/verifyPhoneForFirebase",i).then(function(o){console.log(o),t.util.hide(),o&&o.status&&200==o.status&&o.data&&(console.log("open firebase web version"),t.util.show(),t.api.signInWithPhoneNumber(t.recaptchaVerifier,i.country_code+i.mobile).then(function(i){t.util.hide(),t.otpSent=!0}).catch(function(i){t.util.hide(),console.log(i),t.util.error(i)}))},function(i){t.util.hide(),t.util.apiErrorHandler(i)}).catch(function(i){t.util.hide(),console.log(i),t.util.apiErrorHandler(i)})}else this.util.show(),this.api.post_public("v1/otp/verifyPhone",{country_code:"+"+this.country_code,mobile:this.mobile,type:"store"}).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200==i.status&&1==i.data&&i.otp_id?(t.otp_id=i.otp_id,t.otpSent=!0):i&&i.status&&500==i.status&&0==i.data&&t.util.error(t.util.translate("Something went wrong"))},function(i){t.util.hide(),t.util.apiErrorHandler(i)}).catch(function(i){t.util.hide(),console.log(i),t.util.apiErrorHandler(i)})}},{key:"verifyOTP",value:function(){if(""==this.otp||null==this.otp||!this.otp)return this.util.error("OTP is required"),!1;console.log(this.otp_id,this.otp,this.util.reset_pwd),0==this.util.reset_pwd?this.verifyEmailOTP():"2"==this.util.smsGateway&&1==this.util.reset_pwd?this.verifyFirebaseOTP():1==this.util.reset_pwd&&"2"!=this.util.smsGateway&&this.verifyPhoneOTP()}},{key:"verifyEmailOTP",value:function(){var t=this,i={id:this.otp_id,otp:this.otp,type:"email",email:this.email,country_code:"NA",mobile:"NA"};this.util.show(),this.api.post_public("v1/otp/verifyOTPReset",i).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200===i.status&&i.data&&(t.div=2,t.temp=i.temp,console.log("temp token",t.temp))},function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))}).catch(function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))})}},{key:"verifyFirebaseOTP",value:function(){var t=this;this.util.show(),this.api.enterVerificationCode(this.otp).then(function(i){t.util.hide(),t.generateTokenFromCreds(),console.log(i)}).catch(function(i){console.log(i),t.util.hide(),t.util.error(i)})}},{key:"generateTokenFromCreds",value:function(){var t=this;this.util.show(),this.api.post_public("v1/otp/generateTempToken",{country_code:"+"+this.country_code,mobile:this.mobile}).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200==i.status&&(t.div=2,t.temp=i.temp,console.log("temp token",t.temp))},function(i){t.util.hide(),t.util.apiErrorHandler(i)}).catch(function(i){t.util.hide(),console.log(i),t.util.apiErrorHandler(i)})}},{key:"verifyPhoneOTP",value:function(){var t=this,i={id:this.otp_id,otp:this.otp,type:"phone",email:"NA",country_code:"+"+this.country_code,mobile:this.mobile};this.util.show(),this.api.post_public("v1/otp/verifyOTPReset",i).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200===i.status&&i.data&&(t.div=2,t.temp=i.temp,console.log("temp token",t.temp))},function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))}).catch(function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))})}},{key:"updatePassword",value:function(){return""!=this.password&&null!=this.password&&this.password&&""!=this.confirm&&null!=this.confirm&&this.confirm?this.password!=this.confirm?(this.util.error(this.util.translate("Password does not match")),!1):(console.log("update"),void(0==this.util.reset_pwd?this.updatePasswordWithEmail():"2"==this.util.smsGateway&&1==this.util.reset_pwd?this.updatePasswordFromFirebase():1==this.util.reset_pwd&&"2"!=this.util.smsGateway&&this.updatePasswordWithPhone())):(this.util.error("Password is required"),!1)}},{key:"updatePasswordWithEmail",value:function(){var t=this,i={id:this.otp_id,email:this.email,password:this.password};this.util.show(),this.api.post_temp("v1/password/updateUserPasswordWithEmail",i,this.temp).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200===i.status&&i.data&&(l.a.fire({position:"top-end",icon:"success",title:t.util.translate("Password Updated"),showConfirmButton:!1,timer:1500}),t.location.back())},function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))}).catch(function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))})}},{key:"updatePasswordFromFirebase",value:function(){var t=this;this.api.post_temp("v1/password/updatePasswordFromFirebase",{country_code:"+"+this.country_code,mobile:this.mobile,password:this.password},this.temp).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200===i.status&&i.data&&(l.a.fire({position:"top-end",icon:"success",title:t.util.translate("Password Updated"),showConfirmButton:!1,timer:1500}),t.location.back())},function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))}).catch(function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))})}},{key:"updatePasswordWithPhone",value:function(){var t=this;this.api.post_temp("v1/password/updateUserPasswordWithPhone",{id:this.otp_id,country_code:"+"+this.country_code,mobile:this.mobile,password:this.password,key:"+"+this.country_code+this.mobile},this.temp).then(function(i){console.log(i),t.util.hide(),i&&i.status&&200===i.status&&i.data&&(l.a.fire({position:"top-end",icon:"success",title:t.util.translate("Password Updated"),showConfirmButton:!1,timer:1500}),t.location.back())},function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))}).catch(function(i){return t.util.hide(),console.log(i),i&&401===i.status&&i.error.error||i&&500===i.status&&i.error.error?(t.util.error(i.error.error),!1):(t.util.hide(),void t.util.error(t.util.translate("Wrong OTP")))})}}])&&i(e.prototype,r),n&&i(e,n),o}()).\u0275fac=function(t){return new(t||H)(d.Vb(c.a),d.Vb(a.a),d.Vb(n.h))},H.\u0275cmp=d.Pb({type:H,selectors:[["app-forgot"]],decls:14,vars:4,consts:[["id","sign-in-button"],[1,"app-body"],[1,"main","d-flex","align-items-center","login"],[1,"container"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"card-group"],[1,"card","p-4"],[1,"card-body"],[4,"ngIf"],[2,"text-align","center"],["src","assets/img/brand/big_logo.png",1,"logo"],[1,"text-muted"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"cil-at"],["type","email","autocomplete","email","required","",1,"form-control",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["class","otp_content",4,"ngIf"],[1,"col-6"],["type","button","class","btn btn-primary px-4",3,"click",4,"ngIf"],[1,"otp_content"],[3,"config","onInputChange"],["type","button",1,"btn","btn-primary","px-4",3,"click"],[1,"input-group","mb-4"],[1,"icon-lock"],["type","password","autocomplete","current-password","required","",1,"form-control",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"col-3"],[1,"col-9"],[1,"cil-phone"],["type","number","autocomplete","phone","required","",1,"form-control",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["id","ccmonth",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","tel","autocomplete","phone","required","",1,"form-control",3,"ngModel","placeholder","disabled","ngModelOptions","ngModelChange"]],template:function(t,i){1&t&&(d.Wb(0,"ngx-spinner"),d.Wb(1,"div",0),d.bc(2,"div",1),d.bc(3,"main",2),d.bc(4,"div",3),d.bc(5,"div",4),d.bc(6,"div",5),d.bc(7,"div",6),d.bc(8,"div",7),d.bc(9,"div",8),d.Gc(10,P,17,9,"form",9),d.Gc(11,_,21,11,"form",9),d.Gc(12,C,22,11,"form",9),d.Gc(13,W,21,11,"form",9),d.ac(),d.ac(),d.ac(),d.ac(),d.ac(),d.ac(),d.ac(),d.ac()),2&t&&(d.Jb(10),d.rc("ngIf",0==i.util.reset_pwd&&1==i.div),d.Jb(1),d.rc("ngIf",0==i.util.reset_pwd&&2==i.div),d.Jb(1),d.rc("ngIf",1==i.util.reset_pwd&&1==i.div),d.Jb(1),d.rc("ngIf",1==i.util.reset_pwd&&2==i.div))},directives:[p.a,n.l,h.q,h.h,h.i,h.a,h.o,h.g,h.j,b.a,h.l,h.p,n.k,h.k,h.r],styles:[""]}),H),F=r("iInd"),G=[{path:"",component:S}],x=((E=function i(){t(this,i)}).\u0275fac=function(t){return new(t||E)},E.\u0275mod=d.Tb({type:E}),E.\u0275inj=d.Sb({imports:[[F.g.forChild(G)],F.g]}),E),V=((B=function i(){t(this,i)}).\u0275fac=function(t){return new(t||B)},B.\u0275mod=d.Tb({type:B}),B.\u0275inj=d.Sb({imports:[[n.c,x,h.e,p.b,b.b]]}),B)}}])}();