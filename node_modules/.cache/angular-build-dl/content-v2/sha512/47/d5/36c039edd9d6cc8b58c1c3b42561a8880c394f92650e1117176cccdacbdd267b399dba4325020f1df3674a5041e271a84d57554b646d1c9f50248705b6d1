(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"iU+t":function(t,e,c){"use strict";c.r(e),c.d(e,"StatsModule",function(){return G});var i=c("SVse"),n=c("iInd"),r=c("mrSG"),o=c("wd/R"),s=c("H+bZ"),l=c("2Rin"),a=c("8Y7J"),u=c("7g+E"),d=c("s7LF");let b=(()=>{class t{constructor(){this._printStyle=[],this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(t){for(let e in t)t.hasOwnProperty(e)&&this._printStyle.push((e+JSON.stringify(t[e])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(t){let e=function(t){return`<link rel="stylesheet" type="text/css" href="${t}">`};if(-1!==t.indexOf(",")){const c=t.split(",");for(let t of c)this._styleSheetFile=this._styleSheetFile+e(t)}else this._styleSheetFile=e(t)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(t){const e=[],c=document.getElementsByTagName(t);for(let i=0;i<c.length;i++)e.push(c[i].outerHTML);return e.join("\r\n")}getFormData(t){for(var e=0;e<t.length;e++)t[e].defaultValue=t[e].value,t[e].checked&&(t[e].defaultChecked=!0)}getHtmlContents(){let t=document.getElementById(this.printSectionId),e=t.getElementsByTagName("input");this.getFormData(e);let c=t.getElementsByTagName("textarea");return this.getFormData(c),t.innerHTML}print(){let t,e,c="",i="";const n=this.getElementTag("base");this.useExistingCss&&(c=this.getElementTag("style"),i=this.getElementTag("link")),t=this.getHtmlContents(),e=window.open("","_blank","top=0,left=0,height=auto,width=auto"),e.document.open(),e.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${n}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${c}\n          ${i}\n        </head>\n        <body>\n          ${t}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),e.document.close()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Qb({type:t,selectors:[["button","ngxPrint",""]],hostBindings:function(t,e){1&t&&a.ic("click",function(){return e.print()})},inputs:{useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile",printSectionId:"printSectionId",printTitle:"printTitle"}}),t})(),g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Tb({type:t}),t.\u0275inj=a.Sb({imports:[[]]}),t})();function p(t,e){if(1&t&&(a.bc(0,"button",15),a.Wb(1,"i",16),a.Hc(2),a.ac()),2&t){const t=a.lc();a.rc("useExistingCss",!0)("printTitle",t.storename),a.Jb(2),a.Jc("",t.util.translate("Print")," ")}}function h(t,e){if(1&t&&(a.bc(0,"h2",17),a.Hc(1),a.ac()),2&t){const t=a.lc();a.Jb(1),a.Jc(" ",t.util.translate("No Orders Found")," ")}}function m(t,e){1&t&&(a.bc(0,"span"),a.Hc(1,","),a.ac())}function f(t,e){if(1&t&&(a.bc(0,"p"),a.Hc(1),a.Gc(2,m,2,0,"span",33),a.ac()),2&t){const t=e.$implicit,c=e.index,i=a.lc().$implicit;a.Jb(1),a.Jc(" ",t.name," "),a.Jb(1),a.rc("ngIf",i.orders.length-1!==c)}}function J(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",e.util.currecny," ",t.total," ")}}function y(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",t.total," ",e.util.currecny,"")}}function H(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",e.util.currecny," ",t.discount," ")}}function S(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",t.discount," ",e.util.currecny,"")}}function w(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",e.util.currecny," ",t.grand_total," ")}}function v(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",t.grand_total," ",e.util.currecny,"")}}function I(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",e.util.currecny," ",e.getCommisions(t.total-t.discount)," ")}}function x(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc().$implicit,e=a.lc(2);a.Jb(1),a.Kc("",e.getCommisions(t.total-t.discount)," ",e.util.currecny,"")}}function F(t,e){if(1&t&&(a.bc(0,"tr",34),a.bc(1,"td"),a.Hc(2),a.ac(),a.bc(3,"td"),a.Hc(4),a.ac(),a.bc(5,"td"),a.Gc(6,f,3,2,"p",35),a.ac(),a.bc(7,"td"),a.Gc(8,J,2,2,"span",33),a.Gc(9,y,2,2,"span",33),a.ac(),a.bc(10,"td"),a.Gc(11,H,2,2,"span",33),a.Gc(12,S,2,2,"span",33),a.ac(),a.bc(13,"td"),a.Gc(14,w,2,2,"span",33),a.Gc(15,v,2,2,"span",33),a.ac(),a.bc(16,"td"),a.Gc(17,I,2,2,"span",33),a.Gc(18,x,2,2,"span",33),a.ac(),a.ac()),2&t){const t=e.$implicit,c=a.lc(2);a.Jb(2),a.Jc("#",t.id,""),a.Jb(2),a.Ic(t.date_time),a.Jb(2),a.rc("ngForOf",t.orders),a.Jb(2),a.rc("ngIf","left"===c.util.cside),a.Jb(1),a.rc("ngIf","right"===c.util.cside),a.Jb(2),a.rc("ngIf","left"===c.util.cside),a.Jb(1),a.rc("ngIf","right"===c.util.cside),a.Jb(2),a.rc("ngIf","left"===c.util.cside),a.Jb(1),a.rc("ngIf","right"===c.util.cside),a.Jb(2),a.rc("ngIf","left"===c.util.cside),a.Jb(1),a.rc("ngIf","right"===c.util.cside)}}function D(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc(2);a.Jb(1),a.Kc("",t.util.currecny," ",t.totalAmount," ")}}function O(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc(2);a.Jb(1),a.Kc("",t.totalAmount," ",t.util.currecny,"")}}function T(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc(2);a.Jb(1),a.Kc("",t.util.currecny," ",t.toPay,"")}}function Y(t,e){if(1&t&&(a.bc(0,"span"),a.Hc(1),a.ac()),2&t){const t=a.lc(2);a.Jb(1),a.Kc("",t.toPay," ",t.util.currecny,"")}}function M(t,e){if(1&t&&(a.bc(0,"div",18),a.bc(1,"div",2),a.bc(2,"div",3),a.bc(3,"div",19),a.bc(4,"h3",20),a.Hc(5),a.ac(),a.bc(6,"p",21),a.Hc(7),a.ac(),a.bc(8,"p",22),a.Hc(9),a.ac(),a.bc(10,"p",23),a.Hc(11),a.Wb(12,"br"),a.Hc(13),a.Wb(14,"br"),a.Hc(15),a.ac(),a.bc(16,"p",23),a.Hc(17),a.ac(),a.bc(18,"p",23),a.Hc(19),a.ac(),a.bc(20,"p",24),a.Hc(21),a.ac(),a.bc(22,"p",25),a.Hc(23),a.ac(),a.bc(24,"table",26),a.bc(25,"thead"),a.bc(26,"tr",27),a.bc(27,"th"),a.Hc(28),a.ac(),a.bc(29,"th"),a.Hc(30),a.ac(),a.bc(31,"th"),a.Hc(32),a.ac(),a.bc(33,"th"),a.Hc(34),a.ac(),a.bc(35,"th"),a.Hc(36),a.ac(),a.bc(37,"th"),a.Hc(38),a.ac(),a.bc(39,"th"),a.Hc(40),a.ac(),a.ac(),a.ac(),a.bc(41,"tbody"),a.Gc(42,F,19,11,"tr",28),a.ac(),a.ac(),a.bc(43,"div",29),a.Wb(44,"div",8),a.bc(45,"div",30),a.bc(46,"p",22),a.Hc(47),a.ac(),a.bc(48,"p",22),a.Hc(49),a.ac(),a.ac(),a.bc(50,"div",31),a.bc(51,"p",32),a.Gc(52,D,2,2,"span",33),a.Gc(53,O,2,2,"span",33),a.ac(),a.bc(54,"p",32),a.Gc(55,T,2,2,"span",33),a.Gc(56,Y,2,2,"span",33),a.ac(),a.ac(),a.ac(),a.ac(),a.ac(),a.ac(),a.ac()),2&t){const t=a.lc();a.Jb(5),a.Ic(t.util.general.name),a.Jb(2),a.Kc("",t.getDate(t.from)," to ",t.getDate(t.to)," "),a.Jb(2),a.Jc(" ",t.util.general.name,""),a.Jb(2),a.Jc(" ",t.util.general.address," "),a.Jb(2),a.Kc(" ",t.util.general.city," ",t.util.general.state,""),a.Jb(2),a.Kc(" ",t.util.general.country," ",t.util.general.zip," "),a.Jb(2),a.Jc(" ",t.util.general.email,""),a.Jb(2),a.Jc(" ",t.util.general.mobile," "),a.Jb(2),a.Jc(" ",t.util.store.name," "),a.Jb(2),a.Ic(t.today()),a.Jb(5),a.Jc("",t.util.translate("Id")," "),a.Jb(2),a.Jc("",t.util.translate("Ordered on")," "),a.Jb(2),a.Jc("",t.util.translate("Items")," "),a.Jb(2),a.Jc("",t.util.translate("Total")," "),a.Jb(2),a.Jc("",t.util.translate("Discount")," "),a.Jb(2),a.Jc("",t.util.translate("Grand Total")," "),a.Jb(2),a.Jc("",t.util.translate("Store Amount")," "),a.Jb(2),a.rc("ngForOf",t.storeOrder),a.Jb(5),a.Jc(" ",t.util.translate("Total")," "),a.Jb(2),a.Jc(" ",t.util.translate("Amount Pay To Store")," "),a.Jb(3),a.rc("ngIf","left"===t.util.cside),a.Jb(1),a.rc("ngIf","right"===t.util.cside),a.Jb(2),a.rc("ngIf","left"===t.util.cside),a.Jb(1),a.rc("ngIf","right"===t.util.cside)}}const C=[{path:"",component:(()=>{class t{constructor(t,e){this.util=t,this.api=e,this.stores=[],this.allOrders=[],this.storeOrder=[],this.totalAmount=0,this.commisionAmount=0,this.toPay=0,this.totalAmountsFromOrder=0,this.storeId=parseInt(localStorage.getItem("uid"))}ngOnInit(){}getStats(){if(console.log("from",this.from),console.log("to",this.to),!this.from||!this.to)return console.log("not valid"),this.util.error(this.util.translate("All Fields are required")),!1;{console.log("ok");const t={id:localStorage.getItem("uid"),from:o(this.from,"YYYY-MM-DD HH:mm A").utcOffset("+05:30").format("YYYY-MM-DD HH:mm"),to:o(this.to,"YYYY-MM-DD HH:mm A").utcOffset("+05:30").format("YYYY-MM-DD 23:59")};console.log(t),this.util.show(),this.apiCalled=!1,this.storeOrder=[],this.api.post_private("v1/orders/getStoreStatsDataWithDates",t).then(t=>{if(this.apiCalled=!0,this.util.hide(),console.log(t),t&&200==t.status&&t.data.length){this.storecommission=t.commission.commission,console.log("commustion",this.storecommission);let e=0;t.data.forEach(t=>Object(r.__awaiter)(this,void 0,void 0,function*(){if((t=>{try{return JSON.parse(t),!0}catch(e){return!1}})(t.orders)&&(t.orders=JSON.parse(t.orders),t.date_time=o(t.date_time).format("dddd, MMMM Do YYYY"),t.orders=yield t.orders.filter(t=>t.store_id==this.storeId),console.log(t.discount),(t=>{try{return JSON.parse(t),!0}catch(e){return!1}})(t.status))){const c=JSON.parse(t.status),i=yield c.filter(t=>t.id==this.storeId);i&&i.length&&"delivered"==i[0].status&&(e+=t.total-t.discount,this.storeOrder.push(t))}})),setTimeout(()=>{console.log(this.storeOrder),console.log(e,this.storecommission);const t=e/100*parseFloat(this.storecommission);console.log("commistion====>>>>>",t.toFixed(2)),this.commisionAmount=t.toFixed(2),this.totalAmount=e,this.toPay=this.commisionAmount},1e3)}},t=>{this.util.hide(),console.log(t),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))}).catch(t=>{this.util.hide(),console.log(t),this.apiCalled=!0,this.util.error(this.util.translate("Something went wrong"))})}}getCommisions(t){return(parseFloat(t)*this.storecommission/100).toFixed(2)}donwloadPDF(){}today(){return o().format("ll")}getDate(t){return o(t).format("ll")}getName(){return this.storeOrder[0].name+"_"+o(this.from).format("DDMMYYYY")+"_"+o(this.to).format("DDMMYYYY")}}return t.\u0275fac=function(e){return new(e||t)(a.Vb(l.a),a.Vb(s.a))},t.\u0275cmp=a.Pb({type:t,selectors:[["app-stats"]],decls:31,vars:12,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-body","reset-table","p-t-0"],[1,"form-group","row"],[1,"col-sm-6"],["type","date",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-sm-12"],[1,"btn","btn-danger","btn-round",3,"click"],["style","margin-left: 20px;","printSectionId","print-section","ngxPrint","","class","btn btn-primary",3,"useExistingCss","printTitle",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","row","id","print-section",4,"ngIf"],["printSectionId","print-section","ngxPrint","",1,"btn","btn-primary",2,"margin-left","20px",3,"useExistingCss","printTitle"],[1,"icofont","icofont-printer"],[2,"text-align","center"],["id","print-section",1,"row"],[1,"card-body",2,"padding","20px"],[2,"text-align","center","color","#7ec6aa"],[2,"text-align","center","color","#ED7669"],[2,"text-align","right","font-weight","bold","margin","0px !important","color","#7EC6AA"],[2,"text-align","right","font-weight","bold","margin","0px !important"],[2,"text-align","left","font-weight","bold","margin","0px","color","#aaafad"],[2,"text-align","left","font-weight","bold","color","#7EC6AA"],[1,"table","table-striped"],[1,"text-uppercase",2,"color","#7ec6aa"],["style","background-color: #F5F8FA;",4,"ngFor","ngForOf"],[1,"row",2,"padding","20px"],[1,"col-sm-4"],[1,"col-sm-2"],[2,"color","black !important","margin","0px !important","text-align","right"],[4,"ngIf"],[2,"background-color","#F5F8FA"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(a.Wb(0,"ngx-spinner"),a.bc(1,"div",0),a.bc(2,"div",1),a.bc(3,"div",2),a.bc(4,"div",3),a.bc(5,"div",4),a.Hc(6),a.ac(),a.bc(7,"div",5),a.bc(8,"div",1),a.bc(9,"div",2),a.bc(10,"div",3),a.bc(11,"div",5),a.bc(12,"h5"),a.Hc(13),a.ac(),a.ac(),a.bc(14,"div",6),a.bc(15,"div",7),a.bc(16,"div",8),a.bc(17,"label"),a.Hc(18),a.ac(),a.bc(19,"input",9),a.ic("ngModelChange",function(t){return e.from=t}),a.ac(),a.ac(),a.bc(20,"div",8),a.bc(21,"label"),a.Hc(22),a.ac(),a.bc(23,"input",9),a.ic("ngModelChange",function(t){return e.to=t}),a.ac(),a.ac(),a.ac(),a.bc(24,"div",7),a.bc(25,"div",10),a.bc(26,"button",11),a.ic("click",function(){return e.getStats()}),a.Hc(27),a.ac(),a.Gc(28,p,3,3,"button",12),a.ac(),a.ac(),a.ac(),a.ac(),a.ac(),a.ac(),a.Gc(29,h,2,1,"h2",13),a.Gc(30,M,57,27,"div",14),a.ac(),a.ac(),a.ac(),a.ac(),a.ac()),2&t&&(a.Jb(6),a.Jc(" ",e.util.translate("Stats")," "),a.Jb(7),a.Jc("",e.util.translate("Get Stats")," "),a.Jb(5),a.Jc("",e.util.translate("From Date")," "),a.Jb(1),a.rc("ngModel",e.from)("placeholder",e.util.translate("From Date")),a.Jb(3),a.Jc("",e.util.translate("To Date")," "),a.Jb(1),a.rc("ngModel",e.to)("placeholder",e.util.translate("To Date")),a.Jb(4),a.Jc("",e.util.translate("Get Stats")," "),a.Jb(1),a.rc("ngIf",e.from&&e.to&&(null==e.storeOrder?null:e.storeOrder.length)),a.Jb(1),a.rc("ngIf",e.from&&e.to&&!(null!=e.storeOrder&&e.storeOrder.length)&&e.apiCalled),a.Jb(1),a.rc("ngIf",e.from&&e.to&&(null==e.storeOrder?null:e.storeOrder.length)))},directives:[u.a,d.a,d.g,d.j,i.l,b,i.k],styles:["p[_ngcontent-%COMP%]{margin:0!important}"]}),t})()}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Tb({type:t}),t.\u0275inj=a.Sb({imports:[[n.g.forChild(C)],n.g]}),t})(),G=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Tb({type:t}),t.\u0275inj=a.Sb({imports:[[i.c,E,g,u.b,d.e]]}),t})()}}]);